# LiveSpot (Alpha)

Full-screen display for your ThoughtSpot liveboards

## Important note - please read!

LiveSpot was conceived, built, and is maintained by two members of ThoughtSpot's Customer Success Team. While we do work for ThoughtSpot, this applications is not maintained by ThoughtSpot or ThoughtSpot's Support Team. Please **do not open tickets with ThoughtSpot Support** if you encounter errors with LiveSpot.

## Disclaimer

This application is an early alpha so bugs are to be expected. As this is developed as a side project, we will continue to iterate and address bugs and functionality gaps as we are able to.

## About the app

LiveSpot is a web application built to allow full screen visualization of ThoughtSpot liveboards. This app can be used in scenarios where you want to have a single screen dedicated to displaying one or more liveboards. 

## Requirements

In order to use this application, the following requirements must be met:

* Trusted authentication **enabled** on your cluster
* An active and valid user on the ThoughtSpot cluster

If you want to deploy your own version of LiveSpot, the following are required:
* Ability to deploy to Vercel or other hosting service that supports NextJs applications
* A Typescript development environment
* Preferentially a Unix or Unix-like development environment (application was developed on Mac and has not been tested running locally on a Windows machine)

## Configuration

The configuration file is located at `src/config.ts`. By default, the following is set in the configuration file:

```typescript
export const appConfiguration = {
  auth: {
    useEnvironmentVariables: false,
  },
};
```

### `auth.useEnvironmentVariables [Default: false]`

This flag allows you to set whether the application should use environment variables as part of the auth flow. Note that the publicly deployed version of this application always has this value set to `false`.

**`auth.useEnvironmentVariables: true`**

When set to `true`, you must provide two environment variables:

* `TS_HOST`: The valid URL to your ThoughtSpot host (in the form `https://cluster.thoughtspot.cloud`)
* `TS_SECRET_KEY`: The [secret key](https://developers.thoughtspot.com/docs/trusted-auth-secret-key) from your ThoughtSpot cluster

The one notable advantage to using environment variables is that it allows session refresh. This means that you can have a session of (theoretically) unlimited duration as ThoughtSpots Visual Embed SDK will generate a new token when the old token expires. Currently, this behavior is enabled by default when `auth.useEnvironmentVariables: true`. The other advantage is that the application provides a more frictionless auth flow as the user is not required to provide the host, password, or secret key during the auth flow.

The downside to `auth.useEnvironmentVariables: true` is that it will require you to deploy your own version of this application to use. The public version of this application will always run with this functionality disabled as we do not have a secure way to store secret key's for multiple users.

**IMPORTANT NOTE**: The secret key associated with your ThoughtSpot cluster should be treated the same way you would treat any password or authentication data. If you are going to use your secret key to enable session refreshing, you must store it securely.

**`auth.useEnvironmentVariables: false`**

When set to `false`, the application will require that you provide the ThoughtSpot host URL along with your password or the secret key to authenticate. None of the information provided by users during the authentication flow is stored or persisted by the application which means that there is no means for ThoughtSpot's Visual Embed SDK to generate a new token when the old one expires.

As a result, the primary downside to `auth.useEnvironmentVariables: false` is that you will always have a time-bound session. Once the session expires, the application will not function until you login again. By default, the application will allow you to establish tokens with a life-span ranging from 1 minute to 1 day.

## Security

The following notes related to security are specific to the publicly deployed version of this application.

### Information retention and storage

Information provided by the user to authenticate is neither logged nor stored by the application. It is used to generate a valid auth token and then discarded. The application is deployed to Vercel so will be subject to any relevant information retention policies that they have in place.

### Token handling

When a token is generated by ThoughtSpot, it is passed back to the client browser and stored in session storage. So, while the token is persisted, it is only persisted in the browser and, when the tab is closed, it should be automatically cleared (this behavior depends on the specific browser being used).

Storing the token in this manner is required in order to allow the application to rotate through liveboards automatically. While session storage felt like the best compromise, it's important to understand that a bad actor with access to the browser can see the token. As such, when using this application, you should be careful to protect access to the browser.

